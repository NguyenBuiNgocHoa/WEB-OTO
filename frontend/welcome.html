<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VinFast 3D Showroom</title>
  <link rel="stylesheet" href="./trang_chinh.css">
</head>
<body>
  <header>
    <div class="header-left">
      <a href="index.html" class="back-btn">← Quay lại Showroom 3D</a>
    </div>
    <div class="stats">
      <div>4<br><span>Dòng xe</span></div>
      <div>100%<br><span>Điện hoá</span></div>
      <div>50+<br><span>Quốc Gia</span></div>
      <div>2030<br><span>Tầm nhìn</span></div>
    </div>
    <div class="header-right">
      <div class="user-info" id="userInfo" style="display: none;">
        <span id="userName">User</span>
        <button class="logout-btn" onclick="logout()">Đăng xuất</button>
      </div>
    </div>
  </header>

  <main>
    <section class="highlight">
      <h1>VinFast Lux A2.0</h1>
      <button class="badge">Xe Việt Nam đẳng cấp thế giới</button>
      <div class="highlight-box">
        <img src="./vinfast.jpg" alt="VinFast Lux A2.0" class="main-car-img">
        <div class="info">
          <h2>VinFast Lux A2.0</h2>
          <ul class="specs">
            <li>Động cơ: 2.0L tăng áp</li>
            <li>Hộp số: Tự động 8 cấp</li>
            <li>Công suất: 228 mã lực</li>
            <li>Tăng tốc 0-100km/h: 7.9 giây</li>
            <li>Giá: 1.2 tỷ VNĐ</li>
          </ul>
          <button class="btn">Khám phá xe</button>
        </div>
      </div>
    </section>

    <section class="models">
      <h2>Dòng xe VinFast khác</h2>
      <div class="grid">
        <div class="card">
          <img src="./vinfast1.jpg" alt="Lux SA2.0">
          <h3>VinFast Lux SA2.0</h3>
          <p>SUV hạng sang, 7 chỗ, động cơ 2.0L tăng áp</p>
          <a href="#" class="model-btn">Xem chi tiết</a>
        </div>
        <div class="card">
          <img src="./vinfast2.jpg" alt="VF e34">
          <h3>VinFast VF e34</h3>
          <p>Xe điện thông minh, 5 chỗ, tầm hoạt động 300km</p>
          <a href="#" class="model-btn">Xem chi tiết</a>
        </div>
        <div class="card">
          <img src="./vinfast3.jpg" alt="VF 8">
          <h3>VinFast VF 8</h3>
          <p>Mid-size SUV, xe điện, 5-7 chỗ</p>
          <a href="#" class="model-btn">Xem chi tiết</a>
        </div>
        <div class="card">
          <img src="./vinfast4.jpg" alt="VF 9">
          <h3>VinFast VF 9</h3>
          <p>Full-size SUV, xe điện, 7 chỗ</p>
          <a href="#" class="model-btn">Xem chi tiết</a>
        </div>
      </div>
    </section>

    <section class="tech">
      <h2>Công nghệ tiên tiến</h2>
      <div class="features">
        <div>
          <h4>Điện hoá hoàn toàn</h4>
          <p>Xe điện cho tương lai xanh và sạch</p>
        </div>
        <div>
          <h4>AI thông minh</h4>
          <p>Trợ lý ảo, lái xe tự động cấp độ cao</p>
        </div>
        <div>
          <h4>An toàn tuyệt đối</h4>
          <p>Tiêu chuẩn 5 sao từ Euro NCAP</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; VinFast 3D Showroom</p>
  </footer>

  <script src="./scripts/api.js"></script>
  <script>
    // Kiểm tra đăng nhập khi trang load
    document.addEventListener('DOMContentLoaded', function() {
      if (!apiService.isLoggedIn()) {
        // Nếu chưa đăng nhập, chuyển về trang đăng nhập
        window.location.href = 'index.html';
        return;
      }

      // Hiển thị thông tin user
      loadUserInfo();
    });

    // Hàm load thông tin user
    async function loadUserInfo() {
      try {
        const result = await apiService.getProfile();
        if (result.success) {
          const userInfo = document.getElementById('userInfo');
          const userName = document.getElementById('userName');
          
          userName.textContent = result.data.fullName;
          userInfo.style.display = 'flex';
        }
      } catch (error) {
        console.error('❌ Lỗi load thông tin user:', error.message);
        // Nếu token không hợp lệ, đăng xuất
        logout();
      }
    }

    // Hàm đăng xuất
    function logout() {
      apiService.logout();
    }
  </script>
</body>
</html>